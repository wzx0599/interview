### 操作系统笔记



------

#### 二.内存管理

1.**地址空间**是一个进程可用于寻址内存的一套地址集合

:star:空闲区管理：位图和空闲区链表​

2.**虚拟内存**：解决程序实际所需内存大于物理内存问题，程序的地址空间划分为页面，物理内存划分为页框，通过页表映射，页表存于内存中（分页技术），每个进程有自己的页表，当没有页框与页面匹配时发生缺页中断

:star:加速分页：转换检测缓冲区（TLB-快表），在MMU中，包含访问频次高的页表项，没找到时发生TLB失效。TLB作用时加快虚拟地址到物理地址的转换

:star:针对大内存的页表：

- 多级页表
- 倒排页表：页表改为由物理地址到虚拟地址的映射（不足是加大了由虚拟地址转为物理地址的难度——搜索整个页表，改进是用TLB以及用虚拟地址散列的方法查找）

3.**页面置换算法**：

:star:最优页面置换算法：将最晚需要的页面置换出去（理想上，不能实现，用于评价页面置换算法）​

:star:最近未使用页面置换算法：R位（访问位）和W位（修改位），R位被定期的清零，在最近一个时钟滴答中淘汰一个没有被访问的已修改页面比淘汰一个频繁被使用的“干净”页面要好

:star:先进先出页面置换算法FIFO

:star:第二次机会页面置换算法：​改进的FIFO算法，检查在链表头的R位，如果为0则淘汰，如果为1就将R位置零并将其放到链表尾，（淘汰在最近的时钟间隔内没有访问的页面）

:star:时钟页面置换算法​

改进的第二次机会算法，第二次机会要经常改动页面的位置，该方法将链表改为环形链表，有一个指针指向最旧的页面

:star:最近最少使用页面置换算法（LRU）：硬件计数器（或者维持链表，最近最多使用在前，最近最少使用在后）或***软件老化算法***（每次时钟滴答将计数器右移一位然后将R位加到最左端）​

:star:工作集页面置换算法：一个进程当前正在使用的页面的集合称为工作集，在任意时刻，都存在一个集合包含所有最近k次内存访问所访问过的页面，该集合就是工作集。预先调页。找出一个不在工作集的页面并淘汰它。相当于既用了R位，M位，又记录了一个上次访问时间。

:star:***工作集时钟页面置换算法***：基于时钟算法的工作集页面置换

4.**内存动态分配**：局部置换、全局置换，缺页中断率（PFF）

5.**分段**：不同的数据类型划分独立的地址空间（二维段号和段内地址），优点：简化对长度经常变化的数据结构的管理、简化把单独编译好的过程链接起来的操作、过程和数据可以被区分并单独保护、有助于进程间共享过程和数据

#### 三.文件系统

1.**文件的实现**：

- 连续分配——实现简单（开始磁盘块+块数）、读性能好（单个操作能从磁盘上读出整个文件）；空间浪费、必须指定文件大小（用于CD-ROM）
- 链表分配——为每个文件构造磁盘块链表，随机访问慢、每个磁盘块存储的字节数不再是2的整数次幂
- 采用内存中的表进行链表分配——文件分配表（FAT），占用内存、不适用于大型磁盘
- i节点——每个文件赋予一个数据结构，只有在文件打开时其i节点才会读入内存

2.**目录的实现**

目录系统的主要功能是将ASCII文件名映射成定位文件数据所需要的信息。目录项存放文件名和i节点号

3.**提高文件系统性能**：高速缓存、预读块、减少磁盘臂运动

#### 四.输入输出

1. **RAID**独立磁盘冗余阵列
2. **磁盘格式化**——（1）低级格式化（使磁盘容量变小减小的量取决于前导码、扇区间隙和ECC大小以及保留的备用扇区数目），每个磁道上第0扇区的位置与前一磁道存在偏移（柱面斜进）（2）分区（大多数计算机0分区包含主引导记录MBR）（3）高级格式化（设置引导块、空闲存储管理、根目录、空文件系统）
3. 磁盘臂调度算法——读写磁盘块时间包括：寻道时间、旋转延迟、实际数据传输时间，磁盘寻道时间占主导。（1）先来先服务（2）最短寻道优先（3）电梯算法

#### 五.死锁

1. 死锁——一个进程集合中的每个进程都在等在只能由该进程集合中的其他进程引发的事件，那么该进程集合就是死锁的。
2. 资源死锁的条件——互斥条件、占有和等待条件、不可抢占条件、环路条件
3. 死锁检测和死锁恢复、死锁预防、通信死锁、活锁

#### 六.安全

